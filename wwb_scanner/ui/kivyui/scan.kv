<ScanRangeControls>:
    orientation: 'horizontal'
    
<ScanRangeTextInput>:
    multiline: False
    input_filter: 'float'
    
<ScanControls>:
    orientation: 'horizontal'
    scan_range_widget: scan_range
    start_btn: start_btn
    stop_btn: stop_btn
    canvas:
        Color:
            rgb: .8, .8, .8
        Line:
            rectangle: self.x+1, self.y+1,self.width-1, self.height-1
    TabbedPanel:
        do_default_tab: False
        canvas:
            Color:
                rgb: .8, .8, .8
            Line:
                rectangle: self.x+1, self.y+1,self.width-1, self.height-1
        TabbedPanelItem:
            text: 'General'
            BoxLayout:
                orientation: 'horizontal'
                BoxLayout:
                    orientation: 'vertical'
                    Label:
                        text: 'Scan Range'
                    ScanRangeControls:
                        id: scan_range
                        scan_range_start_txt: scan_range_start
                        scan_range_end_txt: scan_range_end
                        ScanRangeTextInput:
                            id: scan_range_start
                            scan_controls: root
                            range_index: 0
                        ScanRangeTextInput:
                            id: scan_range_end
                            scan_controls: root
                            range_index: 1
                BoxLayout:
                    orientation: 'vertical'
                    Label:
                        text: 'Gain'
                    Button:
                        text: str(root.gain)
                        on_release: root.gain_dropdown.open(self)
                BoxLayout:
                    orientation: 'vertical'
                    Label:
                        text: 'Freq Correction'
                    TextInput:
                        multiline: False
                        input_filter: 'int'
                        text: str(root.freq_correction)
                        on_focus: if not self.focus: root.freq_correction = int(self.text)
        TabbedPanelItem:
            text: 'Advanced'
            BoxLayout:
                orientation: 'horizontal'
                BoxLayout:
                    orientation: 'vertical'
                    Label:
                        text: 'Samples per scan'
                    TextInput:
                        multiline: False
                        input_filter: 'int'
                        text: str(root.samples_per_scan)
                        on_focus: if not self.focus: root.samples_per_scan = int(self.text)
                BoxLayout:
                    orientation: 'vertical'
                    Label:
                        text: 'Window Size'
                    TextInput:
                        multiline: False
                        input_filter: 'int'
                        text: str(root.window_size)
                        on_focus: if not self.focus: root.window_size = int(self.text)
                BoxLayout:
                    orientation: 'vertical'
                    Label:
                        text: 'Window Type'
                    Button:
                        text: root.window_type
                        on_release: root.window_type_dropdown.open(self)
                BoxLayout:
                    orientation: 'vertical'
                    Label:
                        text: 'FFT Size'
                    TextInput:
                        multiline: False
                        input_filter: 'int'
                        text: str(root.fft_size)
                        on_focus: if not self.focus: root.fft_size = int(self.text)
    BoxLayout:
        orientation: 'vertical'
        size_hint_x: .2
        Button:
            id: start_btn
            text: 'Start'
            disabled: root.scanning
            on_release: root.on_scan_button_release()
        Button:
            id: stop_btn
            text: 'Stop'
            diabled: True
            on_release: root.on_stop_button_release()

<ScanGainDropDown>:
    on_select: self.scan_controls.gain = args[1]

<ScanGainDropDownBtn>:
    size_hint_y: None
    height: 44
    text: str(self.gain)
    on_release: self.parent.parent.select(self.gain)

<WindowTypeDropDown>:
    on_select: self.scan_controls.window_type = args[1]
    
<WindowTypeDropDownBtn>:
    size_hint_y: None
    height: 44
    on_release: self.parent.parent.select(self.text)
